## SQL vs NoSQL

### SQL

⇒ 관계형 데이터베이스로 데이터는 테이블 형태로 구성

ex) MySQL, Oracle, PostgreSQL 등

**장점**

- 데이터가 **일관성 있게 구조화**되어 있고, **데이터 간의 관계가 명확히 정의**
    - 복잡한 데이터 관계를 표현하기에 용이
- 데이터 **일관성과 안전성을 보장 ( 데이터의 중복이 없음 )**
- **ACID ( 원자성, 일관성, 격리성, 지속성 )를 보장하기 위해 DB 서버의 performance에 안좋은 영향을 미침**
    - 원자성(Atomicity): 트랜잭션(Transaction) 내의 모든 연산은 전부 수행되거나 전부 수행되지 않아야 함 즉, 트랜잭션 내의 모든 연산이 성공적으로 완료되지 않으면 원래 상태로 롤백되어야 함
    - 일관성(Consistency): 트랜잭션 수행 전과 수행 후의 데이터의 일관성이 유지되어야 함
    - 격리성(Isolation): 여러 개의 트랜잭션이 동시에 수행되더라도 각각의 트랜잭션은 다른 트랜잭션에 영향을 미치지 않고 독립적으로 수행. 즉, 각각의 트랜잭션은 다른 트랜잭션과 격리
    - 지속성(Durability): 트랜잭션이 성공적으로 완료되면, 해당 트랜잭션의 결과는 영구적으로 반영. 즉, 시스템이 다운되거나 중단되더라도 트랜잭션이 완료된 후의 데이터는 유지
- SNS 커짐 → 기존의 RDBMS에서는 커버하기 힘든 트래픽이 생김 → NoSQL 생성
    - 높은 처리량 ,낮은 응답시간을 원하게 됨

**단점**

- 중복된 컬럼을 피하기 위해 정규화를 진행 → **전체 정보를 조회하기 위해서 여러 join 이 필요함** → **복잡한 join은 read 성능 하락**
- 새로운 컬럼을 추가하기 위해서는 무조건 스키마 변경이 필요함 → **유연한 확장성의 부족**
- 대규모 데이터를 처리하는 데 한계가 있어, **수직적 확장은 가능하지만** **수평적 확장이 어려움**
    - 수직적 확장 : 데이터베이스 서버의 성능을 향상시키는 것 (ex. CPU 업그레이드)
    - 수평적 확장 : 더 많은 서버가 추가되고 데이터베이스가 전체적으로 분산됨을 의미 (하나의 데이터베이스에서 작동하지만 여러 호스트에서 작동)

### NoSQL

⇒ 비관계형 데이터베이스로 스키마가 없고 테이블 형태가 아닌 document, key-value, graph 등의 형태로 저장

ex) MongoDB, Redis,Cassandra, DynamoDB, CouchDB

**장점**

- **대규모 분산 시스템에서 뛰어난 성능과 확장성**
- 데이터 구조를 **유연하게 변경**할 수 있고, **비정형 데이터에 대한 처리가 용이** ( 유연성 👍 )
    - 데이터는 **애플리케이션이 필요로 하는 형식으로 저장**됨. **데이터 읽어오는 속도 빨라짐**
- **수평적 확장( scale-out )에 최적화** ( 서버 여러 대로 하나의 클러스터를 구성하여 사용 )
    - 수직 및 수평 확장이 가능해서 **애플리케이션이 발생시키는 모든 읽기/쓰기 요청 처리 가능**
- ACID의 일부를 포기해 높은 처리량, 낮은 응답시간을 추구
    - High Throughput
    - low latency
- MongoDB 는 Json 표기법 사용
- Redis는 Key-value 형태
    - hash 기반으로 sharded 클러스터를 구성할 수 있음
    - 높은 이용성

**단점**

- 중복을 허용해 join 회피 ⇒ application 레벨에서 **중복된 데이터들이 모두 최신 데이터를 유지할 수 있도록 관리해야 함**
- 데이터가 여러 컬렉션에 중복되어 있기 때문에 수정 시 모든 컬렉션에서 수행해야 함 (SQL에서는 중복 데이터가 없으므로 한번만 수행이 가능)
- 일관성과 안전성 등에 대한 보장이 상대적으로 떨어짐

### **SQL 데이터베이스 사용이 더 좋을 때**

- 관계를 맺고 있는 데이터가 자주 변경되는 애플리케이션의 경우
    
    > NoSQL에서는 여러 컬렉션을 모두 수정해야 하기 때문에 비효율적
    > 
- 데이터 구조가 고정되어 있고, 일관성 있게 처리해야 하는 경우
- 데이터베이스의 ACID 성질을 준수해야 하는 경우

### **NoSQL 데이터베이스 사용이 더 좋을 때**

- 읽기를 자주 하지만, 데이터 변경은 자주 없는 경우
- 데이터베이스를 수평으로 확장해야 하는 경우 (막대한 양의 데이터를 다뤄야 하는 경우)
- 데이터 구조가 자주 변경되는 경우
- 데이터 처리 속도가 중요한 경우
- 데이터 간의 관계가 명확하지 않은 경우

무조건적이진 않음!

SQL을 선택해서 복잡한 JOIN문을 만들지 않도록 설계하여 단점을 없앨 수도 있고

NoSQL을 선택해서 중복 데이터를 줄이는 방법으로 설계해서 단점을 없앨 수도 있음

**Reference**

[https://gyoogle.dev/blog/computer-science/data-base/SQL](https://gyoogle.dev/blog/computer-science/data-base/SQL) & NOSQL.html

[https://www.youtube.com/watch?v=sqVByJ5tbNA&list=PLcXyemr8ZeoREWGhhZi5FZs6cvymjIBVe&index=31](https://www.youtube.com/watch?v=sqVByJ5tbNA&list=PLcXyemr8ZeoREWGhhZi5FZs6cvymjIBVe&index=31)
