## Redis 란?

⇒**Key, Value** 구조의 비정형 데이터를 저장하고 관리하기 위한 오픈 소스 기반의 비관계형 데이터 베이스 관리 시스템

- 레디스는 기본적으로 싱글쓰레드
- 레디스의 자료구조는 Atomic Critical Section에 대한 동기화 제공
- 캐싱 가능
- 세션 공유를 위해 세션 클러스터링에도 사용

### Redis를 사용하는 이유?

⇒ 보통 데이터베이스는 HDD (하드디스크)나 SSD에 저장해서 데이터에 접근할 때 마다 디스크 스캐닝이 필요하지만 Redis는 메모리(RAM)에 저장여여  매우 빠르기 때문에 

### Redis가 RAM에 저장되지만, 데이터를 유지할 수 있는 이유 (RAM - 휘발성)

- snapshot : 특정 지점을 디스크에 저장하여 영구적으로 보존, 일정한 시간 간격으로 자동으로 만들거나, 명령을 사용하여 수동으로 생성
- AOF (Append Only File) : 모든 쓰기 명령(쿼리)들을 디스크에 저장해두고, 서버가 셧다운시(시작시) 재실행해서 데이터 복원
- replication : 실시간으로 데이터를 다른 Redis 서버로 복사하는 기능, 서버가 다운 되어도 복제되어 있는 서버를 연결해서 사용
    - AOF가 있는데 replication 사용 이유 : AOF 파일을 읽을때도, 만약 파일이 크다면 읽는 시간이 오래 소요됨
    - master 서버 (실제 데이터가 저장되어 있는 서버 ) - slave 서버  (복제된 서버 )
    - master 서버 데이터 변경시 fork()를 통해 child process를 만들고, child process는 데이터를 수신하여 slave 서버로 보냄

### Value의 5가지 형태

1. String (text, binary data) - 512MB까지 저장이 가능함
    
    ex) 유저의 아이디, 비밀번호, 세션 토큰 등 
    
2. set (String 집합) - 중복 허용 X, 순서(정렬) 보장 X
    
    ex) 유저의 관심사, 태그등 
    
3. sorted set (set을 정렬해둔 상태) 중복 허용 X, 순서(정렬) 보장 O
    
    ex) 유저의 랭킹, 인기 게시글등
    
4. Hash - 구조화된 데이터를 저장하는 데 유용
5. List (양방향 연결리스트도 가능) - 중간에 접근시 O(N)으로 비효율적 
    
    ex) 타임라인 
    

### 주의할 점

- 서버에 장애가 발생했을 경우 그에 대한 운영 플랜이 필요
    - 인메모리 데이터 저장소의 특성상, 서버에 장애가 발생했을 경우 데이터 유실이 발생할 수 있기 때문
- Single Thread 서버 이므로 시간 복잡도를 고려해야 함
    - Single Thread 특성상, 한 번에 하나의 명령어만 수행 가능하기 때문에 처리하는데 오래걸리는 명령은 피해야함
    - ex) KEYS,Flush,GetAll 등
- In-memory 특성상 메모리 파편화, 가상 메모리등의 이해가 필요함
